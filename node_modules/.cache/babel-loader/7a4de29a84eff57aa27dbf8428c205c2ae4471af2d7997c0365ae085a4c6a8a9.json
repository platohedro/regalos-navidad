{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{pb}from\"./services/pocketbase\";import Counter from\"./components/Counter\";import{Analytics}from\"@vercel/analytics/react\";import\"./App.css\";import{Route,BrowserRouter,Routes,Link}from\"react-router-dom\";import FormPage from\"./pages/FormPage\";import Description from\"./components/Description\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[gifts,setGifts]=useState([]);const[boysCount,setBoysCount]=useState(0);const[girlsCount,setGirlsCount]=useState(0);useEffect(()=>{loadGifts();},[]);const loadGifts=async()=>{try{const records=await pb.collection(\"gifts\").getFullList();setGifts(records);// Actualizar contadores\nconst boys=records.filter(gift=>gift.Genero===\"Masculino\").length;const girls=records.filter(gift=>gift.Genero===\"Femenino\").length;setBoysCount(boys);setGirlsCount(girls);}catch(error){console.error(\"Error loading gifts:\",error);}};const handleGiftSubmit=async giftData=>{try{// Validar límites\nif(giftData.Generoo===\"Masculino\"&&boysCount>=40){alert(\"Ya se han registrado 40 regalos para niños\");return;}if(giftData.Generoo===\"Femenino\"&&girlsCount>=40){alert(\"Ya se han registrado 40 regalos para niñas\");return;}// Crear regalo\nawait pb.collection(\"gifts\").create(giftData);// Recargar datos\nloadGifts();}catch(error){console.error(\"Error creating gift:\",error);}};return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(Analytics,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"mr-4 text-segundo-color hover:text-counter-primary\",children:\"Inicio\"}),/*#__PURE__*/_jsx(Link,{to:\"/registro\",className:\"text-segundo-color hover:text-counter-primary\",children:\"Registrar Regalo\"})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-oswald text-3xl\",children:\"Campa\\xF1a de Regalos Solidarios\"}),/*#__PURE__*/_jsx(Description,{}),/*#__PURE__*/_jsx(Counter,{boysCount:boysCount,girlsCount:girlsCount,gifts:gifts})]})}),/*#__PURE__*/_jsx(Route,{path:\"/registro\",element:/*#__PURE__*/_jsx(FormPage,{onGiftSubmit:handleGiftSubmit})})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","pb","Counter","Analytics","Route","BrowserRouter","Routes","Link","FormPage","Description","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","gifts","setGifts","boysCount","setBoysCount","girlsCount","setGirlsCount","loadGifts","records","collection","getFullList","boys","filter","gift","Genero","length","girls","error","console","handleGiftSubmit","giftData","Generoo","alert","create","children","className","to","path","element","onGiftSubmit"],"sources":["/home/noisk8/Documentos/PLATOHEDRO/regalos-navidad/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { pb } from \"./services/pocketbase\";\nimport Counter from \"./components/Counter\";\nimport { Analytics } from \"@vercel/analytics/react\";\nimport \"./App.css\";\nimport { Route, BrowserRouter, Routes, Link } from \"react-router-dom\";\nimport FormPage from \"./pages/FormPage\";\nimport Description from \"./components/Description\";\n\nfunction App() {\n  const [gifts, setGifts] = useState([]);\n  const [boysCount, setBoysCount] = useState(0);\n  const [girlsCount, setGirlsCount] = useState(0);\n\n  useEffect(() => {\n    loadGifts();\n  }, []);\n\n  const loadGifts = async () => {\n    try {\n      const records = await pb.collection(\"gifts\").getFullList();\n      setGifts(records);\n\n      // Actualizar contadores\n      const boys = records.filter((gift) => gift.Genero === \"Masculino\").length;\n      const girls = records.filter((gift) => gift.Genero === \"Femenino\").length;\n\n      setBoysCount(boys);\n      setGirlsCount(girls);\n    } catch (error) {\n      console.error(\"Error loading gifts:\", error);\n    }\n  };\n\n  const handleGiftSubmit = async (giftData) => {\n    try {\n      // Validar límites\n      if (giftData.Generoo === \"Masculino\" && boysCount >= 40) {\n        alert(\"Ya se han registrado 40 regalos para niños\");\n        return;\n      }\n      if (giftData.Generoo === \"Femenino\" && girlsCount >= 40) {\n        alert(\"Ya se han registrado 40 regalos para niñas\");\n        return;\n      }\n\n      // Crear regalo\n      await pb.collection(\"gifts\").create(giftData);\n\n      // Recargar datos\n      loadGifts();\n    } catch (error) {\n      console.error(\"Error creating gift:\", error);\n    }\n  };\n\n  return (\n    <BrowserRouter>\n      <Analytics />\n      <div className=\"App\">\n        <nav className=\"mb-4\">\n          <Link\n            to=\"/\"\n            className=\"mr-4 text-segundo-color hover:text-counter-primary\"\n          >\n            Inicio\n          </Link>\n          <Link\n            to=\"/registro\"\n            className=\"text-segundo-color hover:text-counter-primary\"\n          >\n            Registrar Regalo\n          </Link>\n        </nav>\n\n        <Routes>\n          <Route\n            path=\"/\"\n            element={\n              <>\n                <h1 className=\"font-oswald text-3xl\">\n                  Campaña de Regalos Solidarios\n                </h1>\n                <Description />\n                <Counter\n                  boysCount={boysCount}\n                  girlsCount={girlsCount}\n                  gifts={gifts}\n                />\n                {/* <GiftList gifts={gifts} /> */}\n              </>\n            }\n          />\n          <Route\n            path=\"/registro\"\n            element={<FormPage onGiftSubmit={handleGiftSubmit} />}\n          />\n        </Routes>\n      </div>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,EAAE,KAAQ,uBAAuB,CAC1C,MAAO,CAAAC,OAAO,KAAM,sBAAsB,CAC1C,OAASC,SAAS,KAAQ,yBAAyB,CACnD,MAAO,WAAW,CAClB,OAASC,KAAK,CAAEC,aAAa,CAAEC,MAAM,CAAEC,IAAI,KAAQ,kBAAkB,CACrE,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEnD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACoB,SAAS,CAAEC,YAAY,CAAC,CAAGrB,QAAQ,CAAC,CAAC,CAAC,CAC7C,KAAM,CAACsB,UAAU,CAAEC,aAAa,CAAC,CAAGvB,QAAQ,CAAC,CAAC,CAAC,CAE/CC,SAAS,CAAC,IAAM,CACduB,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAAvB,EAAE,CAACwB,UAAU,CAAC,OAAO,CAAC,CAACC,WAAW,CAAC,CAAC,CAC1DR,QAAQ,CAACM,OAAO,CAAC,CAEjB;AACA,KAAM,CAAAG,IAAI,CAAGH,OAAO,CAACI,MAAM,CAAEC,IAAI,EAAKA,IAAI,CAACC,MAAM,GAAK,WAAW,CAAC,CAACC,MAAM,CACzE,KAAM,CAAAC,KAAK,CAAGR,OAAO,CAACI,MAAM,CAAEC,IAAI,EAAKA,IAAI,CAACC,MAAM,GAAK,UAAU,CAAC,CAACC,MAAM,CAEzEX,YAAY,CAACO,IAAI,CAAC,CAClBL,aAAa,CAACU,KAAK,CAAC,CACtB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CACF,CAAC,CAED,KAAM,CAAAE,gBAAgB,CAAG,KAAO,CAAAC,QAAQ,EAAK,CAC3C,GAAI,CACF;AACA,GAAIA,QAAQ,CAACC,OAAO,GAAK,WAAW,EAAIlB,SAAS,EAAI,EAAE,CAAE,CACvDmB,KAAK,CAAC,4CAA4C,CAAC,CACnD,OACF,CACA,GAAIF,QAAQ,CAACC,OAAO,GAAK,UAAU,EAAIhB,UAAU,EAAI,EAAE,CAAE,CACvDiB,KAAK,CAAC,4CAA4C,CAAC,CACnD,OACF,CAEA;AACA,KAAM,CAAArC,EAAE,CAACwB,UAAU,CAAC,OAAO,CAAC,CAACc,MAAM,CAACH,QAAQ,CAAC,CAE7C;AACAb,SAAS,CAAC,CAAC,CACb,CAAE,MAAOU,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CACF,CAAC,CAED,mBACEpB,KAAA,CAACR,aAAa,EAAAmC,QAAA,eACZ7B,IAAA,CAACR,SAAS,GAAE,CAAC,cACbU,KAAA,QAAK4B,SAAS,CAAC,KAAK,CAAAD,QAAA,eAClB3B,KAAA,QAAK4B,SAAS,CAAC,MAAM,CAAAD,QAAA,eACnB7B,IAAA,CAACJ,IAAI,EACHmC,EAAE,CAAC,GAAG,CACND,SAAS,CAAC,oDAAoD,CAAAD,QAAA,CAC/D,QAED,CAAM,CAAC,cACP7B,IAAA,CAACJ,IAAI,EACHmC,EAAE,CAAC,WAAW,CACdD,SAAS,CAAC,+CAA+C,CAAAD,QAAA,CAC1D,kBAED,CAAM,CAAC,EACJ,CAAC,cAEN3B,KAAA,CAACP,MAAM,EAAAkC,QAAA,eACL7B,IAAA,CAACP,KAAK,EACJuC,IAAI,CAAC,GAAG,CACRC,OAAO,cACL/B,KAAA,CAAAE,SAAA,EAAAyB,QAAA,eACE7B,IAAA,OAAI8B,SAAS,CAAC,sBAAsB,CAAAD,QAAA,CAAC,kCAErC,CAAI,CAAC,cACL7B,IAAA,CAACF,WAAW,GAAE,CAAC,cACfE,IAAA,CAACT,OAAO,EACNiB,SAAS,CAAEA,SAAU,CACrBE,UAAU,CAAEA,UAAW,CACvBJ,KAAK,CAAEA,KAAM,CACd,CAAC,EAEF,CACH,CACF,CAAC,cACFN,IAAA,CAACP,KAAK,EACJuC,IAAI,CAAC,WAAW,CAChBC,OAAO,cAAEjC,IAAA,CAACH,QAAQ,EAACqC,YAAY,CAAEV,gBAAiB,CAAE,CAAE,CACvD,CAAC,EACI,CAAC,EACN,CAAC,EACO,CAAC,CAEpB,CAEA,cAAe,CAAAnB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}